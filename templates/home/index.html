{% extends 'layouts/base.html' %}

{% block title %} Dashboard {% endblock title %}

<!-- Specific CSS goes HERE -->
{% block stylesheets %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
<style>
    .chart-container {
        width: 80%;
        max-width: 600px;
        background-color: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
</style>
{% endblock stylesheets %}

{% block content %}

<!-- Header -->
<div class="header bg-primary pb-6">
    <div class="container-fluid">
        <div class="header-body">
            <div class="row align-items-center py-4">
                <div class="col-lg-6 col-7">
                    <nav aria-label="breadcrumb" class="d-none d-md-inline-block ml-md-4">
                        <ol class="breadcrumb breadcrumb-links breadcrumb-dark">
                            <li class="breadcrumb-item"><a href="#"><i class="fas fa-home"></i></a></li>
                            <li class="breadcrumb-item"><a href="#">Tranh chính</a></li>
                            <li class="breadcrumb-item active" aria-current="page">Mặc định</li>
                        </ol>
                    </nav>
                </div>
                <div class="col-lg-6 col-5 text-right">
                </div>
            </div>
            <!-- Card stats -->
            <div class="row">
                <div class="col-xl-3 col-md-6">
                    <div class="card card-stats">
                        <!-- Card body -->
                        <div class="card-body">
                            <div class="row">
                                <div class="col">
                                    <h5 class="card-title text-uppercase text-muted mb-0">Số cầu thủ</h5>
                                    <span class="h2 font-weight-bold mb-0">{{tong_quan.cau_thu}}</span>
                                </div>
                                <div class="col-auto">
                                    <div class="icon icon-shape bg-gradient-red text-white rounded-circle shadow">
                                        <i class="ni ni-user-run"></i>
                                    </div>
                                </div>
                            </div>
                            <p class="mt-3 mb-0 text-sm">
                                <span class="text-success mr-2">
<!--                                    <i class="fa fa-arrow-up"></i>-->
                                    ---</span>
<!--                                <span class="text-nowrap">Since last month</span>-->
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-md-6">
                    <div class="card card-stats">
                        <!-- Card body -->
                        <div class="card-body">
                            <div class="row">
                                <div class="col">
                                    <h5 class="card-title text-uppercase text-muted mb-0">Số lượng HLV</h5>
                                    <span class="h2 font-weight-bold mb-0">{{tong_quan.hlv}}</span>
                                </div>
                                <div class="col-auto">
                                    <div class="icon icon-shape bg-gradient-orange text-white rounded-circle shadow">
                                        <i class="ni ni-glasses-2"></i>
                                    </div>
                                </div>
                            </div>
                            <p class="mt-3 mb-0 text-sm">
                                <span class="text-success mr-2">
<!--                                    <i class="fa fa-arrow-up"></i> -->
                                    ---</span>
<!--                                <span class="text-nowrap">Since last month</span>-->
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-md-6">
                    <div class="card card-stats">
                        <!-- Card body -->
                        <div class="card-body">
                            <div class="row">
                                <div class="col">
                                    <h5 class="card-title text-uppercase text-muted mb-0">Số hợp đồng</h5>
                                    <span class="h2 font-weight-bold mb-0">{{tong_quan.hop_dong.so_luong}}</span>
                                </div>
                                <div class="col-auto">
                                    <div class="icon icon-shape bg-gradient-green text-white rounded-circle shadow">
                                        <i class="ni ni-collection"></i>
                                    </div>
                                </div>
                            </div>
                            <p class="mt-3 mb-0 text-sm">
                                <span class="text-success mr-2">
                                    <i class="fa fa-arrow-up"></i>
                                    {{tong_quan.hop_dong.tang}}</span>
                                <span class="text-nowrap">So với tháng trước</span>
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-md-6">
                    <div class="card card-stats">
                        <div class="card-body d-flex align-items-center justify-content-center">
                            <img class="img-fluid" src="static/assets/img/cau thu/logo khác/Bundesliga_logo_(2017).svg.png"
                                 alt="Logo" style="max-width: 90px; border: 2px solid #fff" >
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Page content -->
<div class="container-fluid mt--6">
    <div class="row">
        <div class="col-xl-8">
            <div class="card bg-default">
                <div class="card-header bg-transparent">
                    <div class="row align-items-center">
                        <div class="col">
                            <h6 class="text-light text-uppercase ls-1 mb-1">Thống kê</h6>
                            <h5 class="h3 text-white mb-0">Số lượng cầu thủ theo câu lạc bộ</h5>
                        </div>
                        <div class="col">
                            <ul class="nav nav-pills justify-content-end">
                                <li class="nav-item" data-toggle="chart" data-target="#chart-sales-dark"
                                    data-update='{"data":{"datasets":[{"data":[0, 20, 5, 25, 10, 30, 15, 40, 40]}]}}'
                                    data-prefix="$" data-suffix="k">
                                    <a href="#" class="nav-link py-2 px-3" data-toggle="tab">
                                        <span class="d-none d-md-block">2023</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <!-- Chart -->
                    <div class="chart">
                        <!-- Chart wrapper -->
                        <canvas id="bieu-do-cot" data-cot="{{bieu_do_cau_thu_theo_clb}}"></canvas>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-4">
            <div class="card">
                <div class="card-header bg-transparent">
                    <div class="row align-items-center">
                        <div class="col">
                            <h6 class="text-uppercase text-muted ls-1 mb-1">Thống kê</h6>
                            <h5 class="h3 mb-0">HLV theo câu lạc bộ</h5>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <!-- Chart -->
                    <div class="chart">
                        <canvas id="pie-chart-luong" data-luong="{{bieu_do_hlv_theo_clb}}"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    {% include "includes/footer.html" %}

</div>

{% endblock content %}

<!-- Specific JS goes HERE -->
{% block javascripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const elm = document.getElementById('pie-chart-luong');
        const dataLuongStr = elm.getAttribute('data-luong');
        let dataLuong = dataLuongStr.replace(/'/g, '"');
        dataLuong = JSON.parse(dataLuong);

        const ctx = elm.getContext('2d');
        new Chart(ctx, {
        type: 'pie',
        data: {
            labels: dataLuong.labels,
            datasets: [{
                data: dataLuong.data,
                backgroundColor: [
                    '#36A2EB',
                    '#9966FF'
                ]
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'bottom',
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            return context.label + ': ' + context.parsed;
                        }
                    }
                }
            }
        }
    });

        const elmCot = document.getElementById('bieu-do-cot')
        const dataCotStr = elmCot.getAttribute('data-cot');
        let dataCot = dataCotStr.replace(/'/g, '"');
        dataCot = JSON.parse(dataCot);

        const ctx2 = elmCot.getContext('2d');
        new Chart(ctx2, {
            type: 'bar',
            data: {
              labels: dataCot.labels,
              datasets: [{
                label: '# cầu thủ',
                data: dataCot.data,
                borderWidth: 1
              }]
            },
            options: {
              scales: {
                y: {
                  beginAtZero: true
                }
              }
            }
          });

    });
</script>
<script src="/static/assets/vendor/chart.js/dist/Chart.min.js"></script>
<script src="/static/assets/vendor/chart.js/dist/Chart.extension.js"></script>

{% endblock javascripts %}
